I"<h1 id="å¼€å§‹springåº”ç”¨">å¼€å§‹springåº”ç”¨</h1>

<h2 id="åˆ›å»ºappé¡¹ç›®">åˆ›å»ºappé¡¹ç›®</h2>

<p>åˆ›å»ºjava applicationé¡¹ç›®ï¼Œè®¾ç›®å½•ç»“æ„ï¼š</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>.
â”œâ”€â”€ lib/
â”‚Â Â  â”œâ”€â”€ commons-logging-1.2.jar
â”‚Â Â  â”œâ”€â”€ spring-aop-5.1.9.RELEASE.jar
â”‚Â Â  â”œâ”€â”€ spring-aspects-5.1.9.RELEASE.jar
â”‚Â Â  â”œâ”€â”€ spring-beans-5.1.9.RELEASE.jar
â”‚Â Â  â”œâ”€â”€ spring-context-5.1.9.RELEASE.jar
â”‚Â Â  â”œâ”€â”€ spring-core-5.1.9.RELEASE.jar
â”‚Â Â  â””â”€â”€ spring-expression-5.1.9.RELEASE.jar
â””â”€â”€ src/
    â”œâ”€â”€ beans.xml
    â”œâ”€â”€ Main.java
    â””â”€â”€ Message.java
</code></pre></div></div>

<blockquote>
  <p><code class="highlighter-rouge">beans.xml</code>æ–‡ä»¶åå¯ä»¥ä»»æ„ï¼Œåé¢æ˜¯é€šè¿‡ä¼ é€’xmlåç§°ç»™<code class="highlighter-rouge">ApplicationContext</code>ç±»æŸ¥æ‰¾çš„ã€‚</p>
</blockquote>

<h2 id="æ·»åŠ åº“">æ·»åŠ åº“</h2>

<p>å…ˆä»å®˜ç½‘ä¸‹è½½springåº“ï¼šhttps://repo.spring.io/release/org/springframework/spring/</p>

<p>ä½¿ç”¨ideæ·»åŠ (add as library)ä»¥ä¸‹å‡ ä¸ªå¸¸ç”¨åˆ°çš„springåº“ï¼ˆaopã€aspectsæ˜¯ä½¿ç”¨åˆ‡é¢æ—¶éœ€è¦çš„ï¼‰ï¼š</p>
<ul>
  <li>core</li>
  <li>context</li>
  <li>beans</li>
  <li>expression</li>
  <li>aop</li>
  <li>aspects</li>
</ul>

<p>ç”±äºspringéœ€è¦common loggingåº“ï¼Œå®˜ç½‘ä¸‹è½½ï¼šhttp://commons.apache.org/proper/commons-logging/download_logging.cgi</p>

<p>æ·»åŠ åˆ°ideä¸­ï¼š</p>
<ul>
  <li>common logging</li>
</ul>

<h2 id="ä»£ç ">ä»£ç </h2>

<p>æ·»åŠ javaç±»ï¼Œä½œä¸ºbeanã€‚</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// src/Message.java</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Message</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">msg</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">getMsg</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">msg</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setMsg</span><span class="o">(</span><span class="nc">String</span> <span class="n">msg</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">msg</span> <span class="o">=</span> <span class="s">"this mssage is : "</span> <span class="o">+</span> <span class="n">msg</span><span class="o">;</span>
    <span class="o">}</span>

<span class="o">}</span>

</code></pre></div></div>

<p>æ·»åŠ xmlæ–‡ä»¶ï¼Œé…ç½®beanã€‚</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">&lt;!--src/beans.xml--&gt;</span>
<span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>

<span class="nt">&lt;beans</span> <span class="na">xmlns=</span><span class="s">"http://www.springframework.org/schema/beans"</span>
       <span class="na">xmlns:xsi=</span><span class="s">"http://www.w3.org/2001/XMLSchema-instance"</span>
       <span class="na">xsi:schemaLocation=</span><span class="s">"http://www.springframework.org/schema/beans
       http://www.springframework.org/schema/beans/spring-beans-3.0.xsd"</span><span class="nt">&gt;</span>

    <span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">"msg1"</span> <span class="na">class=</span><span class="s">"Message"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"msg"</span> <span class="na">value=</span><span class="s">"hello world"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/bean&gt;</span>

<span class="nt">&lt;/beans&gt;</span>
</code></pre></div></div>

<p>æ·»åŠ javaç±»ï¼Œä½œä¸ºä¸»ç±»ï¼Œä»xmlé…ç½®æ–‡ä»¶ä¸­ï¼Œè·å–beanã€‚</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// src/Main.java</span>
<span class="kn">import</span> <span class="nn">org.springframework.context.ApplicationContext</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.context.support.ClassPathXmlApplicationContext</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Main</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">){</span>
        <span class="nc">ApplicationContext</span> <span class="n">context</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ClassPathXmlApplicationContext</span><span class="o">(</span><span class="s">"beans.xml"</span><span class="o">);</span>
        <span class="nc">Message</span> <span class="n">msg</span> <span class="o">=</span> <span class="o">(</span><span class="nc">Message</span><span class="o">)</span> <span class="n">context</span><span class="o">.</span><span class="na">getBean</span><span class="o">(</span><span class="s">"msg1"</span><span class="o">);</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">msg</span><span class="o">.</span><span class="na">getMsg</span><span class="o">());</span>
    <span class="o">}</span>
<span class="o">}</span>

</code></pre></div></div>

<p>è¿è¡Œä¸»ç±»ã€‚</p>

<hr />

<h1 id="å¼€å§‹springç½‘é¡µ">å¼€å§‹springç½‘é¡µ</h1>

<h2 id="åˆ›å»ºwebé¡¹ç›®">åˆ›å»ºwebé¡¹ç›®</h2>

<blockquote>
  <p>ç›´æ¥ä½¿ç”¨ideaåˆ›å»ºwebé¡¹ç›®å‘å¯¼ï¼Œå¯å‡å°‘ä¸€äº›ideaçš„é…ç½®ï¼Œè¿™æ˜¯æ²¡å¿…è¦çš„å­¦ä¹ æˆæœ¬ã€‚</p>
</blockquote>

<p>New Project -&gt; Java Enterprise -&gt; Web Application</p>

<blockquote>
  <p>ä¹Ÿå¯ç›´æ¥é€‰Springé‡Œçš„é…ç½®ï¼Œè¿™å°†ä¼šè‡ªåŠ¨ä¸‹è½½é…ç½®å¥½ä¸€äº›éœ€è¦çš„springåº“ã€‚</p>
</blockquote>

<p>ç›®å½•ç»“æ„ï¼š</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>.
â”œâ”€â”€ lib/
â”‚Â Â  â”œâ”€â”€ aopalliance-1.0.jar
â”‚Â Â  â”œâ”€â”€ commons-logging-1.2.jar
â”‚Â Â  â”œâ”€â”€ spring-aop-4.3.18.RELEASE.jar
â”‚Â Â  â”œâ”€â”€ spring-aspects-4.3.18.RELEASE.jar
â”‚Â Â  â”œâ”€â”€ spring-beans-4.3.18.RELEASE.jar
â”‚Â Â  â”œâ”€â”€ spring-context-4.3.18.RELEASE.jar
â”‚Â Â  â”œâ”€â”€ spring-context-support-4.3.18.RELEASE.jar
â”‚Â Â  â”œâ”€â”€ spring-core-4.3.18.RELEASE.jar
â”‚Â Â  â”œâ”€â”€ spring-expression-4.3.18.RELEASE.jar
â”‚Â Â  â”œâ”€â”€ spring-instrument-4.3.18.RELEASE.jar
â”‚Â Â  â”œâ”€â”€ spring-instrument-tomcat-4.3.18.RELEASE.jar
â”‚Â Â  â”œâ”€â”€ spring-jdbc-4.3.18.RELEASE.jar
â”‚Â Â  â”œâ”€â”€ spring-jms-4.3.18.RELEASE.jar
â”‚Â Â  â”œâ”€â”€ spring-messaging-4.3.18.RELEASE.jar
â”‚Â Â  â”œâ”€â”€ spring-orm-4.3.18.RELEASE.jar
â”‚Â Â  â”œâ”€â”€ spring-oxm-4.3.18.RELEASE.jar
â”‚Â Â  â”œâ”€â”€ spring-test-4.3.18.RELEASE.jar
â”‚Â Â  â”œâ”€â”€ spring-tx-4.3.18.RELEASE.jar
â”‚Â Â  â”œâ”€â”€ spring-web-4.3.18.RELEASE.jar
â”‚Â Â  â”œâ”€â”€ spring-webmvc-4.3.18.RELEASE.jar
â”‚Â Â  â”œâ”€â”€ spring-webmvc-portlet-4.3.18.RELEASE.jar
â”‚Â Â  â””â”€â”€ spring-websocket-4.3.18.RELEASE.jar
â”œâ”€â”€ src/
â”‚Â Â  â””â”€â”€ main/
â”‚Â Â      â””â”€â”€ java/
â”‚Â Â          â””â”€â”€ com/
â”‚Â Â              â””â”€â”€ yww/
â”‚Â Â                  â”œâ”€â”€ HomeController.java
â”‚Â Â                  â””â”€â”€ Message.java
â””â”€â”€ web/
    â”œâ”€â”€ index.jsp
    â””â”€â”€ WEB-INF/
        â”œâ”€â”€ applicationContext.xml
        â”œâ”€â”€ dispatcher-servlet.xml
        â”œâ”€â”€ jsp/
        â”‚Â Â  â””â”€â”€ home.jsp
        â””â”€â”€ web.xml
</code></pre></div></div>

<blockquote>
  <p><code class="highlighter-rouge">com.yww.HomeController.java</code>æ˜¯è‡ªå·±åˆ›å»ºçš„æ§åˆ¶å™¨ï¼Œåšé¡¹ç›®æ—¶ï¼Œåº”å½’åˆ°ä¸€ä¸ªcontrolleræ–‡ä»¶å¤¹ä¾¿äºç®¡ç†ã€‚
<code class="highlighter-rouge">applicationContext.xml</code>æ–‡ä»¶ä¸æ˜¯å¿…é¡»çš„ï¼Œç”¨æ¥é…ç½®beanï¼Œå¯ä»¥åœ¨<code class="highlighter-rouge">web.xml</code>ä¸­é™¤å»è¿™éƒ¨åˆ†ä¸æƒ³è¦çš„<code class="highlighter-rouge">&lt;context-param&gt;</code>ã€‚
<code class="highlighter-rouge">applicationContext.xml</code>æ–‡ä»¶ä¸­å¯ä»¥é…ç½®<code class="highlighter-rouge">bean</code>ï¼Œå› å…¶åœ¨<code class="highlighter-rouge">web.xml</code>æ–‡ä»¶ä¸­<code class="highlighter-rouge">&lt;context-param&gt;</code>æ ‡ç­¾ä¸‹é…ç½®å¥½äº†è¿™ä¸ªæ–‡ä»¶ï¼Œæ•…ä¸å¿…åƒå‰é¢appé¡¹ç›®ä¸­ï¼Œä½¿ç”¨<code class="highlighter-rouge">ClassPathXmlApplicationContext</code>çš„ä¸€ç³»åˆ—ä¸Šä¸‹æ–‡è·å–<code class="highlighter-rouge">beançš„xmlé…ç½®æ–‡ä»¶</code>ï¼Œå†å»è·å–<code class="highlighter-rouge">bean</code>ã€‚</p>
</blockquote>

<h2 id="æ·»åŠ åº“-1">æ·»åŠ åº“</h2>

<blockquote>
  <p>ä¸ºäº†ä½¿ç”¨java eeï¼Œéœ€å®‰è£…ideaä¼ä¸šç‰ˆã€‚</p>
</blockquote>

<blockquote>
  <p>ç›¸æ¯”åº”ç”¨ï¼Œç½‘é¡µéœ€è¦æ·»åŠ webã€webmvcåº“ã€‚</p>
</blockquote>

<p>æ·»åŠ åº“åˆ°libæ–‡ä»¶å¤¹ï¼š</p>
<ul>
  <li>common logging</li>
  <li>core</li>
  <li>context</li>
  <li>beans</li>
  <li>expression</li>
  <li>aop</li>
  <li>aspects</li>
  <li>web</li>
  <li>webmvc</li>
</ul>

<p>é€‰å–æ‰€æœ‰åº“ï¼Œå³é”®<code class="highlighter-rouge">add as library</code>ã€‚</p>

<h2 id="é…ç½®">é…ç½®</h2>

<ul>
  <li>
    <p>è®¾ç½®ä»£ç è·¯å¾„ï¼šFile -&gt; Project Structure -&gt; Modules -&gt; å³é”®é€‰ä¸­é¡¹ç›®è·¯å¾„src/main/java/ï¼Œé€‰æ‹©Sourcesã€‚</p>
  </li>
  <li>
    <p>é…ç½®è¾“å‡ºï¼šFile -&gt; Project Structure -&gt; Artifacts -&gt; + -&gt; Web Application:Exploded -&gt; From Modulesâ€¦</p>
  </li>
  <li>
    <p>ä¿®å¤é—®é¢˜ï¼ˆæ‰“åŒ…æ—¶æ·»åŠ libï¼‰ï¼šFile -&gt; Project Structure -&gt; Problems -&gt; Fixï¼Œå°±ä¼šè‡ªåŠ¨æ·»åŠ ä¿®å¤ã€‚</p>
  </li>
  <li>
    <p>ä¸ºäº†ç›´æ¥åœ¨ideaä¸­è¿è¡Œè°ƒè¯•ï¼Œé…ç½®ideaçš„tomcatï¼šRun -&gt; Edit Configurationsâ€¦ -&gt; + -&gt; Tomcat Server -&gt; local -&gt; Application serverçš„Configureâ€¦ -&gt; Tomcat_Homeé€‰æ‹©è‡ªå·±ä¸‹è½½çš„Tomcatçš„ç›®å½•ã€‚</p>
  </li>
  <li>
    <p>å°†<code class="highlighter-rouge">web.xml</code>ä¸­<code class="highlighter-rouge">&lt;url-pattern&gt;*.form&lt;/url-pattern&gt;</code>æ”¹ä¸º<code class="highlighter-rouge">&lt;url-pattern&gt;/&lt;/url-pattern&gt;</code>ï¼Œå¦åˆ™åªä¼šæ‹¦æˆª<code class="highlighter-rouge">*.form</code>ç»“å°¾çš„è¯·æ±‚ã€‚</p>
  </li>
</ul>

<p>å¦‚æœéœ€è¦éƒ¨ç½²åˆ°è‡ªå·±çš„tomcatæœåŠ¡å™¨ä¸Šï¼Œéœ€è¦é…ç½®æ‰“åŒ…ä¸ºwarçš„é…ç½®ã€‚</p>

<ul>
  <li>æ‰“åŒ…waré…ç½®ï¼šFile -&gt; Project Structure -&gt; Artifacts -&gt; + -&gt; Web Application:Archive -&gt; From â€˜xxxâ€™ï¼Œä»ä¹‹å‰çš„Explodedæ‰“åŒ…æˆwarã€‚</li>
  <li>æ‰“åŒ…warï¼šBuild -&gt; Build Artifactsâ€¦ -&gt; xxx archive -&gt; buildã€‚</li>
</ul>

<blockquote>
  <p>åœ¨<code class="highlighter-rouge">Project Structure</code> -&gt; <code class="highlighter-rouge">Artifacts</code>çš„é…ç½®æ—¶ï¼Œå…ˆåˆ›å»º<code class="highlighter-rouge">Web Application:Exploded</code>ï¼ˆå› ä¸ºå¯ä»¥ä»Modulesä¸­ç”Ÿæˆï¼‰ï¼Œå†åˆ›å»º<code class="highlighter-rouge">Web Application:Archive</code>ï¼ˆå› ä¸ºå¯ä»¥ç›´æ¥ä»Explodedä¸­ç”Ÿæˆï¼‰ã€‚</p>
</blockquote>

<h2 id="ä»£ç -1">ä»£ç </h2>

<p>tomcatä¼šè¯»å–web.xmlè¿›è¡Œé…ç½®ï¼Œå…¶ä¸­åŒ…å«äº†springçš„DispatcherServletè·¯å¾„å¤„ç†çš„servletã€‚</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">&lt;!-- web/WEB-INF/web.xml --&gt;</span>
<span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="nt">&lt;web-app</span> <span class="na">xmlns=</span><span class="s">"http://xmlns.jcp.org/xml/ns/javaee"</span>
         <span class="na">xmlns:xsi=</span><span class="s">"http://www.w3.org/2001/XMLSchema-instance"</span>
         <span class="na">xsi:schemaLocation=</span><span class="s">"http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd"</span>
         <span class="na">version=</span><span class="s">"4.0"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;context-param&gt;</span>
        <span class="nt">&lt;param-name&gt;</span>contextConfigLocation<span class="nt">&lt;/param-name&gt;</span>
        <span class="nt">&lt;param-value&gt;</span>/WEB-INF/applicationContext.xml<span class="nt">&lt;/param-value&gt;</span>
    <span class="nt">&lt;/context-param&gt;</span>
    <span class="nt">&lt;listener&gt;</span>
        <span class="nt">&lt;listener-class&gt;</span>org.springframework.web.context.ContextLoaderListener<span class="nt">&lt;/listener-class&gt;</span>
    <span class="nt">&lt;/listener&gt;</span>
    <span class="nt">&lt;servlet&gt;</span>
        <span class="nt">&lt;servlet-name&gt;</span>dispatcher<span class="nt">&lt;/servlet-name&gt;</span>
        <span class="nt">&lt;servlet-class&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="nt">&lt;/servlet-class&gt;</span>
        <span class="nt">&lt;load-on-startup&gt;</span>1<span class="nt">&lt;/load-on-startup&gt;</span>
    <span class="nt">&lt;/servlet&gt;</span>
    <span class="nt">&lt;servlet-mapping&gt;</span>
        <span class="nt">&lt;servlet-name&gt;</span>dispatcher<span class="nt">&lt;/servlet-name&gt;</span>
<span class="c">&lt;!--        &lt;url-pattern&gt;*.form&lt;/url-pattern&gt;--&gt;</span>
        <span class="nt">&lt;url-pattern&gt;</span>/<span class="nt">&lt;/url-pattern&gt;</span>
    <span class="nt">&lt;/servlet-mapping&gt;</span>
<span class="nt">&lt;/web-app&gt;</span>
</code></pre></div></div>

<p>é…ç½®ï¼Œå¼€å¯ç»„ä»¶æ‰«æï¼Œé…ç½®viewè§†å›¾è§£æå™¨è§£æçš„å‰åç¼€ã€‚</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">&lt;!-- web/WEB-INF/dispatcher-servlet.xml --&gt;</span>
<span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="nt">&lt;beans</span> <span class="na">xmlns=</span><span class="s">"http://www.springframework.org/schema/beans"</span>
       <span class="na">xmlns:xsi=</span><span class="s">"http://www.w3.org/2001/XMLSchema-instance"</span>
       <span class="na">xmlns:context=</span><span class="s">"http://www.springframework.org/schema/context"</span>
       <span class="na">xsi:schemaLocation=</span><span class="s">"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd"</span><span class="nt">&gt;</span>

    <span class="nt">&lt;context:component-scan</span> <span class="na">base-package=</span><span class="s">"com.yww"</span><span class="nt">/&gt;</span>

    <span class="nt">&lt;bean</span> <span class="na">class=</span><span class="s">"org.springframework.web.servlet.view.InternalResourceViewResolver"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"prefix"</span> <span class="na">value=</span><span class="s">"/WEB-INF/jsp/"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"suffix"</span> <span class="na">value=</span><span class="s">".jsp"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/bean&gt;</span>

<span class="nt">&lt;/beans&gt;</span>
</code></pre></div></div>

<p>é…ç½®beanï¼Œå°†<code class="highlighter-rouge">Message.java</code>ç±»æ”¾å…¥<code class="highlighter-rouge">com/yww/</code>ç›®å½•ä¸‹ï¼Œé…ç½®beançš„æ–‡ä»¶<code class="highlighter-rouge">applicationContext.xml</code>ã€‚</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">&lt;!-- src/main/webapp/WEB-INF/applicationContext.xml --&gt;</span>
<span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="nt">&lt;beans</span> <span class="na">xmlns=</span><span class="s">"http://www.springframework.org/schema/beans"</span>
       <span class="na">xmlns:xsi=</span><span class="s">"http://www.w3.org/2001/XMLSchema-instance"</span>
       <span class="na">xsi:schemaLocation=</span><span class="s">"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd"</span><span class="nt">&gt;</span>

    <span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">"msg1"</span> <span class="na">class=</span><span class="s">"Message"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"msg"</span> <span class="na">value=</span><span class="s">"hello world"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/bean&gt;</span>

<span class="nt">&lt;/beans&gt;</span>
</code></pre></div></div>

<p>ä½œä¸ºbeançš„Messageç±»ã€‚</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// src/main/java/com/yww/Message.java</span>
<span class="kn">package</span> <span class="nn">com.yww</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Message</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">msg</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">getMsg</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">msg</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setMsg</span><span class="o">(</span><span class="nc">String</span> <span class="n">msg</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">msg</span> <span class="o">=</span> <span class="s">"this mssage is : "</span> <span class="o">+</span> <span class="n">msg</span><span class="o">;</span>
    <span class="o">}</span>

<span class="o">}</span>

</code></pre></div></div>

<p>æ§åˆ¶å™¨ï¼Œè®¾ç½®è¯·æ±‚çš„è·¯å¾„æ˜ å°„ï¼Œè¿”å›æ¸²æŸ“çš„è§†å›¾åç§°çš„å­—ç¬¦ä¸²ï¼Œspringä¼šè‡ªåŠ¨ä½¿ç”¨ä¸Šé¢çš„xmlé…ç½®æŒ‡å®šçš„åç¼€.jspæ·»åŠ åï¼Œå¯»æ‰¾ç¬¦åˆçš„jspæ–‡ä»¶ï¼ˆå¦‚æ­¤å¤„çš„home.jspï¼‰ã€‚</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// src/main/java/com/yww/HomeController.java</span>
<span class="kn">package</span> <span class="nn">com.yww</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.springframework.stereotype.Controller</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.ui.ModelMap</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.RequestMapping</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.RequestMethod</span><span class="o">;</span>

<span class="nd">@Controller</span>
<span class="nd">@RequestMapping</span><span class="o">(</span><span class="s">"/home"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">HomeController</span> <span class="o">{</span>
    <span class="nd">@RequestMapping</span><span class="o">(</span><span class="n">method</span> <span class="o">=</span> <span class="nc">RequestMethod</span><span class="o">.</span><span class="na">GET</span><span class="o">)</span>
    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">printHome</span><span class="o">(</span><span class="nc">ModelMap</span> <span class="n">model</span><span class="o">){</span>
        <span class="n">model</span><span class="o">.</span><span class="na">addAttribute</span><span class="o">(</span><span class="s">"msg"</span><span class="o">,</span> <span class="s">"this is a page!"</span><span class="o">);</span>

        <span class="k">return</span> <span class="s">"home"</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>

</code></pre></div></div>

<p>æ¸²æŸ“è§†å›¾ï¼Œé€šè¿‡æ§åˆ¶å™¨è¿”å›çš„å­—ç¬¦ä¸²æŸ¥æ‰¾åŒ¹é…çš„è§†å›¾ã€‚</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">&lt;!-- web/WEB-INF/jsp/home.jsp --&gt;</span>
<span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html</span> <span class="na">lang=</span><span class="s">"en"</span><span class="nt">&gt;</span>
<span class="nt">&lt;head&gt;</span>
    <span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"UTF-8"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;title&gt;</span>Title<span class="nt">&lt;/title&gt;</span>
<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>
    <span class="nt">&lt;h1&gt;</span>${msg}<span class="nt">&lt;/h1&gt;</span>
<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</code></pre></div></div>

<h2 id="è¿è¡Œ">è¿è¡Œ</h2>

<p>é…ç½®äº†ideaä¸­çš„tomcaté…ç½®ï¼Œå³å¯ç›´æ¥ç‚¹å‡»è¿è¡ŒæŒ‰é’®è¿è¡Œï¼Œåœ¨æµè§ˆå™¨ä¸­è¾“å…¥ï¼šhttp://localhost:8080/ æˆ–è€… http://localhost:8080/home ï¼Œå³å¯æŸ¥çœ‹ã€‚</p>

<p>æˆ–é…ç½®äº†æ‰“åŒ…warï¼Œå…ˆå°†waræ”¾åœ¨<code class="highlighter-rouge">tomcatç›®å½•/webapps/</code>ä¸‹ï¼Œå†æ‰‹åŠ¨è¿è¡Œ<code class="highlighter-rouge">tomcatç›®å½•/bin/startup.sh</code>å¯åŠ¨tomcatï¼Œtomcatä¼šè‡ªåŠ¨éƒ¨ç½²è¯¥webåº”ç”¨ï¼Œæœ€åæ‰“å¼€æµè§ˆå™¨è¾“å…¥ï¼šhttp://localhost:8080/ ã€‚</p>

<hr />

<h1 id="mavenå¿«é€Ÿå¼€å§‹">Mavenå¿«é€Ÿå¼€å§‹</h1>

<h2 id="åˆ›å»ºmavençš„springé¡¹ç›®">åˆ›å»ºmavençš„springé¡¹ç›®</h2>

<p>ä¸‹è½½Mavenï¼Œä½¿ç”¨å‘½ä»¤åˆ›å»ºwebappï¼š</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mvn archetype:generate <span class="nt">-DarchetypeArtactId</span><span class="o">=</span><span class="s2">"maven-archetype-webapp"</span> <span class="nt">-DarchetypeGroupId</span><span class="o">=</span><span class="s2">"org.apache.maven.archetypes"</span> <span class="nt">-DarchetypeVersion</span><span class="o">=</span><span class="s2">"1.4"</span>
</code></pre></div></div>

<p>ç›®å½•ç»“æ„ï¼š</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>.
â”œâ”€â”€ pom.xml
â””â”€â”€ src/
    â””â”€â”€ main/
        â”œâ”€â”€ java/
        â”‚Â Â  â””â”€â”€ com/
        â”‚Â Â      â””â”€â”€ yww/
        â”‚Â Â          â”œâ”€â”€ HomeController.java
        â”‚Â Â          â””â”€â”€ Message.java
        â”œâ”€â”€ resources/
        â””â”€â”€ webapp/
            â”œâ”€â”€ index.jsp
            â””â”€â”€ WEB-INF/
                â”œâ”€â”€ applicationContext.xml
                â”œâ”€â”€ dispatcher-servlet.xml
                â”œâ”€â”€ jsp/
                â”‚Â Â  â””â”€â”€ home.jsp
                â””â”€â”€ web.xml
</code></pre></div></div>

<h2 id="ä»£ç -2">ä»£ç </h2>

<blockquote>
  <p>å…¶å®ƒçš„æ–‡ä»¶éƒ½åŒä¸ä½¿ç”¨mavenç®¡ç†é¡¹ç›®çš„ä¸€æ ·ï¼Œåªæ˜¯ç›®å½•ç»“æ„æœ‰æ‰€ä¸åŒã€‚</p>
</blockquote>

<p>pom.xmlæ˜¯mavençš„é…ç½®æ–‡ä»¶ã€‚</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">&lt;!-- pom.xml --&gt;</span>
<span class="cp">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span>

<span class="nt">&lt;project</span> <span class="na">xmlns=</span><span class="s">"http://maven.apache.org/POM/4.0.0"</span> <span class="na">xmlns:xsi=</span><span class="s">"http://www.w3.org/2001/XMLSchema-instance"</span> <span class="na">xsi:schemaLocation=</span><span class="s">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;modelVersion&gt;</span>4.0.0<span class="nt">&lt;/modelVersion&gt;</span>

  <span class="nt">&lt;groupId&gt;</span>com.yww<span class="nt">&lt;/groupId&gt;</span>
  <span class="nt">&lt;artifactId&gt;</span>demo<span class="nt">&lt;/artifactId&gt;</span>
  <span class="nt">&lt;version&gt;</span>1.0-SNAPSHOT<span class="nt">&lt;/version&gt;</span>
  <span class="nt">&lt;packaging&gt;</span>war<span class="nt">&lt;/packaging&gt;</span>

  <span class="nt">&lt;name&gt;</span>demo Maven Webapp<span class="nt">&lt;/name&gt;</span>
  <span class="c">&lt;!-- FIXME change it to the project's website --&gt;</span>
  <span class="nt">&lt;url&gt;</span>http://www.example.com<span class="nt">&lt;/url&gt;</span>

  <span class="nt">&lt;properties&gt;</span>
    <span class="nt">&lt;project.build.sourceEncoding&gt;</span>UTF-8<span class="nt">&lt;/project.build.sourceEncoding&gt;</span>
    <span class="nt">&lt;maven.compiler.source&gt;</span>1.8<span class="nt">&lt;/maven.compiler.source&gt;</span>
    <span class="nt">&lt;maven.compiler.target&gt;</span>1.8<span class="nt">&lt;/maven.compiler.target&gt;</span>
  <span class="nt">&lt;/properties&gt;</span>

  <span class="nt">&lt;dependencies&gt;</span>
    <span class="nt">&lt;dependency&gt;</span>
      <span class="nt">&lt;groupId&gt;</span>commons-logging<span class="nt">&lt;/groupId&gt;</span>
      <span class="nt">&lt;artifactId&gt;</span>commons-logging<span class="nt">&lt;/artifactId&gt;</span>
      <span class="nt">&lt;version&gt;</span>1.2<span class="nt">&lt;/version&gt;</span>
    <span class="nt">&lt;/dependency&gt;</span>

    <span class="nt">&lt;dependency&gt;</span>
      <span class="nt">&lt;groupId&gt;</span>org.springframework<span class="nt">&lt;/groupId&gt;</span>
      <span class="nt">&lt;artifactId&gt;</span>spring-core<span class="nt">&lt;/artifactId&gt;</span>
      <span class="nt">&lt;version&gt;</span>5.2.0.RELEASE<span class="nt">&lt;/version&gt;</span>
    <span class="nt">&lt;/dependency&gt;</span>

    <span class="nt">&lt;dependency&gt;</span>
      <span class="nt">&lt;groupId&gt;</span>org.springframework<span class="nt">&lt;/groupId&gt;</span>
      <span class="nt">&lt;artifactId&gt;</span>spring-context<span class="nt">&lt;/artifactId&gt;</span>
      <span class="nt">&lt;version&gt;</span>5.2.0.RELEASE<span class="nt">&lt;/version&gt;</span>
    <span class="nt">&lt;/dependency&gt;</span>

    <span class="nt">&lt;dependency&gt;</span>
      <span class="nt">&lt;groupId&gt;</span>org.springframework<span class="nt">&lt;/groupId&gt;</span>
      <span class="nt">&lt;artifactId&gt;</span>spring-beans<span class="nt">&lt;/artifactId&gt;</span>
      <span class="nt">&lt;version&gt;</span>5.2.0.RELEASE<span class="nt">&lt;/version&gt;</span>
    <span class="nt">&lt;/dependency&gt;</span>

    <span class="nt">&lt;dependency&gt;</span>
      <span class="nt">&lt;groupId&gt;</span>org.springframework<span class="nt">&lt;/groupId&gt;</span>
      <span class="nt">&lt;artifactId&gt;</span>spring-expression<span class="nt">&lt;/artifactId&gt;</span>
      <span class="nt">&lt;version&gt;</span>5.2.0.RELEASE<span class="nt">&lt;/version&gt;</span>
    <span class="nt">&lt;/dependency&gt;</span>

    <span class="nt">&lt;dependency&gt;</span>
      <span class="nt">&lt;groupId&gt;</span>org.springframework<span class="nt">&lt;/groupId&gt;</span>
      <span class="nt">&lt;artifactId&gt;</span>spring-aop<span class="nt">&lt;/artifactId&gt;</span>
      <span class="nt">&lt;version&gt;</span>5.2.0.RELEASE<span class="nt">&lt;/version&gt;</span>
    <span class="nt">&lt;/dependency&gt;</span>

    <span class="nt">&lt;dependency&gt;</span>
      <span class="nt">&lt;groupId&gt;</span>org.springframework<span class="nt">&lt;/groupId&gt;</span>
      <span class="nt">&lt;artifactId&gt;</span>spring-aspects<span class="nt">&lt;/artifactId&gt;</span>
      <span class="nt">&lt;version&gt;</span>5.2.0.RELEASE<span class="nt">&lt;/version&gt;</span>
    <span class="nt">&lt;/dependency&gt;</span>

    <span class="nt">&lt;dependency&gt;</span>
      <span class="nt">&lt;groupId&gt;</span>org.springframework<span class="nt">&lt;/groupId&gt;</span>
      <span class="nt">&lt;artifactId&gt;</span>spring-web<span class="nt">&lt;/artifactId&gt;</span>
      <span class="nt">&lt;version&gt;</span>5.2.0.RELEASE<span class="nt">&lt;/version&gt;</span>
    <span class="nt">&lt;/dependency&gt;</span>

    <span class="nt">&lt;dependency&gt;</span>
      <span class="nt">&lt;groupId&gt;</span>org.springframework<span class="nt">&lt;/groupId&gt;</span>
      <span class="nt">&lt;artifactId&gt;</span>spring-webmvc<span class="nt">&lt;/artifactId&gt;</span>
      <span class="nt">&lt;version&gt;</span>5.2.0.RELEASE<span class="nt">&lt;/version&gt;</span>
    <span class="nt">&lt;/dependency&gt;</span>

    <span class="nt">&lt;dependency&gt;</span>
      <span class="nt">&lt;groupId&gt;</span>junit<span class="nt">&lt;/groupId&gt;</span>
      <span class="nt">&lt;artifactId&gt;</span>junit<span class="nt">&lt;/artifactId&gt;</span>
      <span class="nt">&lt;version&gt;</span>4.11<span class="nt">&lt;/version&gt;</span>
      <span class="nt">&lt;scope&gt;</span>test<span class="nt">&lt;/scope&gt;</span>
    <span class="nt">&lt;/dependency&gt;</span>
  <span class="nt">&lt;/dependencies&gt;</span>

<span class="nt">&lt;/project&gt;</span>
</code></pre></div></div>

<blockquote>
  <p>æ­¤å¤„å°†<code class="highlighter-rouge">&lt;build&gt;</code>çš„æ‰€æœ‰<code class="highlighter-rouge">&lt;plugin&gt;</code>åˆ é™¤äº†ï¼Œä¹Ÿå¯ä»¥æ­£å¸¸æ‰“åŒ…æ„å»ºé¡¹ç›®ã€‚</p>
</blockquote>

<blockquote>
  <p>ä¸åŒä¸ä¹‹å‰çš„bean.xmlé…ç½®æ–‡ä»¶ï¼Œè¿™é‡Œéœ€è¦ä½¿ç”¨åŒ…åé™å®šã€‚</p>
</blockquote>

<p><code class="highlighter-rouge">web.xml</code>æ–‡ä»¶åŒä¹‹å‰é…ç½®ã€‚</p>

<p>æ§åˆ¶å™¨ä¸­è·å–beanï¼ˆè‡ªåŠ¨è¿çº¿éœ€è¦å¯¼AutowiredåŒ…ï¼‰ã€‚</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">com.yww</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.springframework.stereotype.Controller</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.ui.ModelMap</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.RequestMapping</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.RequestMethod</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.beans.factory.annotation.Autowired</span><span class="o">;</span>

<span class="nd">@Controller</span>
<span class="nd">@RequestMapping</span><span class="o">(</span><span class="s">"/home"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">HomeController</span> <span class="o">{</span>

    <span class="nd">@Autowired</span>
    <span class="kd">public</span> <span class="nc">Message</span> <span class="n">msg1</span><span class="o">;</span>

    <span class="nd">@RequestMapping</span><span class="o">(</span><span class="n">method</span> <span class="o">=</span> <span class="nc">RequestMethod</span><span class="o">.</span><span class="na">GET</span><span class="o">)</span>
    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">printHome</span><span class="o">(</span><span class="nc">ModelMap</span> <span class="n">model</span><span class="o">){</span>
        <span class="nc">String</span> <span class="n">str1</span> <span class="o">=</span> <span class="n">msg1</span><span class="o">.</span><span class="na">getMsg</span><span class="o">();</span>
        <span class="n">model</span><span class="o">.</span><span class="na">addAttribute</span><span class="o">(</span><span class="s">"msg"</span><span class="o">,</span> <span class="s">"this is a page! gradle "</span> <span class="o">+</span> <span class="n">str1</span><span class="o">);</span>

        <span class="k">return</span> <span class="s">"home"</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>

</code></pre></div></div>

<h2 id="æ‰“åŒ…è¿è¡Œ">æ‰“åŒ…è¿è¡Œ</h2>

<p>åœ¨ä¸pom.xmlåŒçº§ç›®å½•ä¸‹ï¼Œä½¿ç”¨å‘½ä»¤ä¸‹è½½ä¾èµ–çš„åº“å¹¶æ‰“åŒ…æˆwarï¼š</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mvn <span class="nb">install</span>
</code></pre></div></div>

<p>å°†<code class="highlighter-rouge">target/</code>ç›®å½•ä¸‹çš„waræ–‡ä»¶æ”¾å…¥<code class="highlighter-rouge">tomcat/webapps/</code>ä¸­è¿è¡Œã€‚</p>

<hr />

<h1 id="gradleå¿«é€Ÿå¼€å§‹">Gradleå¿«é€Ÿå¼€å§‹</h1>

<h2 id="åˆ›å»ºgradleç›®å½•ç»“æ„">åˆ›å»ºgradleç›®å½•ç»“æ„</h2>

<p>ä¸‹è½½Gradleï¼Œæ‰§è¡Œå‘½ä»¤åˆ›å»ºwebé¡¹ç›®ï¼š</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gradle init
</code></pre></div></div>

<p>ç›®å½•ç»“æ„ï¼š</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>.
â”œâ”€â”€ build.gradle
â””â”€â”€ src/
    â””â”€â”€ main/
        â”œâ”€â”€ java/
        â”‚Â Â  â””â”€â”€ com/
        â”‚Â Â      â””â”€â”€ yww/
        â”‚Â Â          â”œâ”€â”€ HomeController.java
        â”‚Â Â          â””â”€â”€ Message.java
        â”œâ”€â”€ resources/
        â”‚Â Â  â””â”€â”€ application.properties
        â””â”€â”€ webapp/
            â”œâ”€â”€ index.jsp
            â””â”€â”€ WEB-INF/
                â”œâ”€â”€ applicationContext.xml
                â”œâ”€â”€ dispatcher-servlet.xml
                â”œâ”€â”€ jsp/
                â”‚Â Â  â””â”€â”€ home.jsp
                â””â”€â”€ web.xml
</code></pre></div></div>

<h2 id="ä»£ç -3">ä»£ç </h2>

<blockquote>
  <p>æœªåˆ—å‡ºçš„ä»£ç çš†åŒä¸Šã€‚</p>
</blockquote>

<p>build.gradleæ˜¯gradleç®¡ç†é¡¹ç›®çš„é…ç½®æ–‡ä»¶ã€‚</p>

<div class="language-gradle highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// build.gradle</span>
<span class="n">plugins</span> <span class="o">{</span>
	<span class="n">id</span> <span class="s1">'java'</span>
    <span class="n">id</span> <span class="s1">'war'</span>
<span class="o">}</span>

<span class="n">group</span> <span class="o">=</span> <span class="s1">'com.yww'</span>
<span class="n">version</span> <span class="o">=</span> <span class="s1">'0.0.1-SNAPSHOT'</span>
<span class="n">sourceCompatibility</span> <span class="o">=</span> <span class="mf">1.8</span>
<span class="n">targetCompatibility</span> <span class="o">=</span> <span class="mf">1.8</span>

<span class="n">ext</span><span class="o">{</span>
    <span class="n">springVersion</span> <span class="o">=</span> <span class="s1">'5.2.0.RELEASE'</span>
<span class="o">}</span>

<span class="k">repositories</span> <span class="o">{</span>
	<span class="n">mavenCentral</span><span class="o">()</span>
<span class="o">}</span>

<span class="k">dependencies</span> <span class="o">{</span>
    <span class="n">compile</span> <span class="s2">"org.springframework:spring-core:$springVersion"</span>
    <span class="n">compile</span> <span class="s2">"org.springframework:spring-context:$springVersion"</span>
    <span class="n">compile</span> <span class="s2">"org.springframework:spring-beans:$springVersion"</span>
    <span class="n">compile</span> <span class="s2">"org.springframework:spring-expression:$springVersion"</span>
    <span class="n">compile</span> <span class="s2">"org.springframework:spring-aop:$springVersion"</span>
    <span class="n">compile</span> <span class="s2">"org.springframework:spring-aspects:$springVersion"</span>
    <span class="n">compile</span> <span class="s2">"org.springframework:spring-web:$springVersion"</span>
    <span class="n">compile</span> <span class="s2">"org.springframework:spring-webmvc:$springVersion"</span>

	<span class="n">testCompile</span> <span class="s2">"junit:junit:4.12"</span>
    <span class="n">compile</span> <span class="s2">"org.springframework:spring-jdbc:$springVersion"</span>
    <span class="n">compile</span> <span class="nl">group:</span> <span class="s1">'mysql'</span><span class="o">,</span> <span class="nl">name:</span> <span class="s1">'mysql-connector-java'</span><span class="o">,</span> <span class="nl">version:</span> <span class="s1">'8.0.15'</span>
<span class="o">}</span>

</code></pre></div></div>

<h2 id="æ‰“åŒ…è¿è¡Œ-1">æ‰“åŒ…è¿è¡Œ</h2>

<p>åœ¨ä¸build.gradleåŒçº§ç›®å½•ä¸‹ï¼Œæ‰§è¡Œå‘½ä»¤æ„å»ºæ‰“åŒ…warï¼š</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gradle build
</code></pre></div></div>

<p>å°†<code class="highlighter-rouge">build/lib/</code>ç›®å½•ä¸‹çš„<code class="highlighter-rouge">war</code>æ–‡ä»¶æ”¾å…¥tomcatè¿è¡Œã€‚</p>

<hr />
:ET