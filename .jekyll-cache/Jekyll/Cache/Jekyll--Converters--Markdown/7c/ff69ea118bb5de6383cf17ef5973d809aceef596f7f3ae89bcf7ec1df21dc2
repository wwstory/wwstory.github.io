I"W¾<h1 id="ç®€ä»‹">ç®€ä»‹</h1>

<p>ä»å‰çš„ç½‘é¡µç¨‹åºæ˜¯å°†ä¸šåŠ¡ä»£ç åµŒå…¥åˆ°JSPé¡µé¢ä¸­ï¼Œè€¦åˆæ€§è¾ƒé«˜ã€‚</p>

<p>åæ¥å°†å‰åç«¯çš„ä»£ç åˆ†ç¦»åï¼Œé‡‡ç”¨MVCæ¶æ„ï¼ŒMï¼šæ¨¡å‹ï¼Œè´Ÿè´£æ•°æ®æ¨¡å‹çš„æ§åˆ¶ï¼ŒVï¼šè§†å›¾ï¼Œè´Ÿè´£è§†å›¾çš„å±•ç¤ºï¼ŒCï¼šæ§åˆ¶å™¨ï¼Œè´Ÿè´£å°†æ•°æ®æ¨¡å‹æ”¾åˆ°ç›¸åº”çš„è§†å›¾ä¸­æ¸²æŸ“ã€‚</p>

<h1 id="è¯·æ±‚è¿‡ç¨‹">è¯·æ±‚è¿‡ç¨‹</h1>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                           â†—â”‚ å¤„ç†å™¨æ˜ å°„â”‚
                         2/ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         /         3
<span class="err">è¯·æ±‚</span> 1 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” --------------------&gt; â”Œâ”€â”€â”€â”€â”€â”
<span class="gd">-----&gt;â”‚DispatcherServletâ”‚ &lt;--â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  4 â”‚æ§åˆ¶å™¨â”‚
</span>      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚æ¨¡å‹åŠé€»è¾‘è§†å›¾åâ”‚ ---â”‚     â”‚
                      \  \   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”˜
                       \  \5   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
                       6\  ---&gt;â”‚è§†å›¾è§£æå™¨â”‚
                         â†˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            å“åº” 7      â”Œâ”€â”€â”€â”€â”
<span class="gd">&lt;----------------------â”‚è§†å›¾ â”‚
</span>                       â””â”€â”€â”€â”€â”˜
</code></pre></div></div>

<p>è¿‡ç¨‹ï¼š</p>

<ul>
  <li>è¯·æ±‚ï¼šè¯·æ±‚ç¦»å¼€æµè§ˆå™¨æ—¶ï¼Œä¼šå¸¦æœ‰ç”¨æˆ·æ‰€è¯·æ±‚å†…å®¹çš„ä¿¡æ¯ï¼Œè‡³å°‘ä¼šåŒ…å«è¯·æ±‚çš„URLã€‚ï¼ˆè¿˜å¯èƒ½å¸¦æœ‰å¦‚è¡¨å•ä¿¡æ¯ï¼‰</li>
  <li>DispatcherServletï¼šå°†è¯·æ±‚å‘é€ç»™Spring MVCæ§åˆ¶å™¨ï¼ˆcontrollerï¼‰</li>
</ul>

<p>é…ç½®<code class="highlighter-rouge">DispatcherServlet</code>å¯ç»§æ‰¿<code class="highlighter-rouge">AbstractAnnotationConfigDispatcherServletInitializer</code>å®ç°ã€‚</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    AbstractAnnotationConfigDispatcherServletInitializer
              |                            |
             åˆ›å»º                          åˆ›å»º
              |                            |
              v                            v
      DispatcherServlet               ContextLoaderListener
              |                            |
             åŠ è½½                          åŠ è½½
              |                            |
              v                            V
          åº”ç”¨ä¸Šä¸‹æ–‡                     åº”ç”¨ä¸Šä¸‹æ–‡
ï¼ˆæŸ¥æ‰¾@Configurationæ³¨è§£çš„ç±»ï¼Œ      ï¼ˆæŸ¥æ‰¾@Configurationæ³¨è§£çš„ç±»ï¼Œ
  åŠ è½½åŒ…å«Webç»„ä»¶çš„beanã€‚             åŠ è½½åº”ç”¨ä¸­çš„å…¶å®ƒbeanã€‚
  å¦‚æ§åˆ¶å™¨,è§†å›¾è§£æå™¨,å¤„ç†å™¨æ˜ å°„ç­‰ï¼‰     å¦‚è‡ªå®šä¹‰çš„ä¸šåŠ¡æ‰€éœ€çš„beanï¼‰

</code></pre></div></div>

<h1 id="æ§åˆ¶å™¨">æ§åˆ¶å™¨</h1>

<p><strong>æ§åˆ¶å™¨æ³¨è§£</strong>:</p>

<p><code class="highlighter-rouge">@Controller</code>æ˜¯åŸºäº<code class="highlighter-rouge">@Component</code>çš„æ³¨è§£ï¼Œæ•ˆæœæ˜¯ä¸€æ ·çš„ã€‚ä½†åœ¨MVCä¸­ä½¿ç”¨<code class="highlighter-rouge">@Component</code>åœ¨è¡¨æ„ä¸Šå¯èƒ½ä¼šå·®ä¸€äº›ã€‚</p>

<p><strong>æ˜ å°„æ³¨è§£</strong>:</p>

<p><code class="highlighter-rouge">@RequestMapping</code>æŒ‡å®šäº†è¦å¤„ç†è¯·æ±‚çš„è·¯å¾„ã€‚</p>

<p>å¯ä»¥æ”¾åœ¨ç±»ä¸Šï¼Œæˆ–æ–¹æ³•ä¸Šã€‚æ”¾åœ¨ç±»ä¸Šè®¾å®šæ˜ å°„çš„è·¯å¾„çš„è¯ï¼Œå…¶æ–¹æ³•è¿˜éœ€è¦æ­¤æ³¨è§£æŒ‡å®šè¯·æ±‚çš„æ–¹å¼ã€‚</p>

<p>åŒä¸€ä¸ªæ–¹æ³•æˆ–ç±»è·¯å¾„çš„æ˜ å°„å¯ä»¥æœ‰å¤šä¸ªã€‚</p>

<p><strong>è¿”å›å€¼-è§†å›¾å</strong>ï¼š</p>

<p>è¿”å›çš„å­—ç¬¦ä¸²ï¼Œå°†ä¼šè¢«Spring MVCè§£è¯»ä¸ºè¦æ¸²æŸ“çš„è§†å›¾åç§°ã€‚<code class="highlighter-rouge">DispatcherServlet</code>ä¼šè¦æ±‚è§†å›¾è§£æå™¨å°†è¿™ä¸ªé€»è¾‘åç§°è§£æä¸ºå®é™…çš„è§†å›¾ã€‚</p>

<p><code class="highlighter-rouge">InternalResourceViewResolver</code>èƒ½è¯†åˆ«è¿”å›çš„å­—ç¬¦å‰ç¼€å¸¦æœ‰<code class="highlighter-rouge">redirect:</code>æˆ–<code class="highlighter-rouge">forward:</code>ï¼Œåˆ†åˆ«æ˜¯é‡å®šå‘ï¼Œå‰å¾€ã€‚</p>

<p><strong>æ¨¡å‹å‚æ•°</strong>ï¼š</p>

<p>å‚æ•°ä¸­çš„ä¼ é€’æ•°æ®çš„æ¨¡å‹æœ‰3ç§ï¼š<code class="highlighter-rouge">Model</code>,<code class="highlighter-rouge">ModelMap</code>,<code class="highlighter-rouge">ModelAndView</code>ã€‚</p>

<p>å…¶å…³ç³»å¦‚ä¸‹ã€‚</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">ExtendedModelMap</span> <span class="kd">extends</span> <span class="nc">ModelMap</span> <span class="kd">implements</span> <span class="nc">Model</span><span class="o">{}</span>
</code></pre></div></div>

<p><code class="highlighter-rouge">ModelAndView</code>ç›¸æ¯”äºå…¶å®ƒè€Œè¨€ï¼Œå¯ä»¥è®¾ç½®æ¸²æŸ“çš„è§†å›¾åç§°ã€‚</p>

<p>æ¨¡å‹è°ƒç”¨<code class="highlighter-rouge">addAttribute()</code>æ–¹æ³•ä¸æŒ‡å®škeyçš„æ—¶å€™ï¼Œkeyä¼šæ ¹æ®å¯¹è±¡çš„ç±»å‹æ¨æ–­ç¡®å®šã€‚</p>

<p>å¯ä»¥æ˜¯<code class="highlighter-rouge">Map</code>ç±»å‹åšæ¨¡å‹ã€‚</p>

<p>ç”šè‡³å¯ä»¥ç›´æ¥è¿”å›åˆ—è¡¨ï¼Œå½“å¤„ç†å™¨è¿”å›å¯¹è±¡æˆ–é›†åˆæ—¶ï¼Œè¿™ä¸ªå€¼ä¼šè¢«æ”¾åˆ°æ¨¡å‹ä¸­ï¼Œæ¨¡å‹çš„keyä¼šæ ¹æ®å…¶ç±»å‹æ¨æ–­å¾—å‡ºã€‚è€Œé€»è¾‘è§†å›¾çš„åè¯ä¼šæ ¹æ®è¯·æ±‚è·¯å¾„æ¨æ–­å¾—å‡ºã€‚</p>

<blockquote>
  <p>å½“è§†å›¾æ˜¯JSPæ—¶ï¼Œæ¨¡å‹æ•°æ®ä¼šä½œä¸ºè¯·æ±‚å±æ€§æ”¾åˆ°è¯·æ±‚ä¸­ã€‚</p>
</blockquote>

<h1 id="æ¨¡å‹">æ¨¡å‹</h1>

<p>å¯ä»¥å¯¹æ¨¡å‹çš„å±æ€§æ·»åŠ æ³¨è§£å®ç°æ ¡éªŒã€‚è¿˜éœ€è¦åœ¨æ§åˆ¶å™¨ä¼ é€’å‚æ•°å‰åŠ <code class="highlighter-rouge">@Valid</code>æ³¨è§£ï¼Œå¹¶å<code class="highlighter-rouge">ç´§æ¥ç€</code>é™„åŠ å‚æ•°<code class="highlighter-rouge">Errors</code>è·å–å¼‚å¸¸ã€‚</p>

<p>Javaæ ¡éªŒæ³¨è§£ï¼š@AssertFalse, @AssertTrue, @DecimalMax, @DecimalMin, @Digits, @Future, @Max, @Min, @NotNull, @Null, @Past, @Pattern, @Sizeã€‚</p>

<h1 id="ç¤ºä¾‹">ç¤ºä¾‹</h1>

<ul>
  <li>åŸºæœ¬MVCç¨‹åº</li>
  <li>æ¥å—è¯·æ±‚çš„è¾“å…¥</li>
  <li>
    <ul>
      <li>è·¯å¾„å‚æ•°</li>
    </ul>
  </li>
  <li>
    <ul>
      <li>è¡¨å•å‚æ•°</li>
    </ul>
  </li>
</ul>

<h2 id="åŸºæœ¬mvcç¨‹åº">åŸºæœ¬MVCç¨‹åº</h2>

<h3 id="xmlé…ç½®dispatcherservlet">xmlé…ç½®DispatcherServlet</h3>

<h4 id="é¡¹ç›®ç»“æ„">é¡¹ç›®ç»“æ„</h4>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>.
â”œâ”€â”€ build.gradle
â””â”€â”€ src
    â””â”€â”€ main
        â”œâ”€â”€ java
        â”‚Â Â  â””â”€â”€ com
        â”‚Â Â      â””â”€â”€ yww
        â”‚Â Â          â”œâ”€â”€ HomeController.java
        â”‚Â Â          â””â”€â”€ Message.java
        â”œâ”€â”€ resources
        â”‚Â Â  â””â”€â”€ application.properties
        â””â”€â”€ webapp
            â”œâ”€â”€ index.jsp
            â””â”€â”€ WEB-INF
                â”œâ”€â”€ applicationContext.xml
                â”œâ”€â”€ dispatcher-servlet.xml
                â”œâ”€â”€ jsp
                â”‚Â Â  â””â”€â”€ home.jsp
                â””â”€â”€ web.xml
</code></pre></div></div>

<h4 id="ä»£ç ">ä»£ç </h4>

<p><code class="highlighter-rouge">build.gradle</code></p>

<div class="language-gradle highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">plugins</span> <span class="o">{</span>
	<span class="n">id</span> <span class="s1">'java'</span>
    <span class="n">id</span> <span class="s1">'war'</span>
<span class="o">}</span>

<span class="n">group</span> <span class="o">=</span> <span class="s1">'com.yww'</span>
<span class="n">version</span> <span class="o">=</span> <span class="s1">'0.0.1-SNAPSHOT'</span>
<span class="n">sourceCompatibility</span> <span class="o">=</span> <span class="mf">1.8</span>
<span class="n">targetCompatibility</span> <span class="o">=</span> <span class="mf">1.8</span>

<span class="n">ext</span><span class="o">{</span>
    <span class="n">springVersion</span> <span class="o">=</span> <span class="s1">'5.2.0.RELEASE'</span>
<span class="o">}</span>

<span class="k">repositories</span> <span class="o">{</span>
	<span class="n">mavenCentral</span><span class="o">()</span>
<span class="o">}</span>

<span class="k">dependencies</span> <span class="o">{</span>
    <span class="n">compile</span> <span class="s2">"org.springframework:spring-core:$springVersion"</span>
    <span class="n">compile</span> <span class="s2">"org.springframework:spring-context:$springVersion"</span>
    <span class="n">compile</span> <span class="s2">"org.springframework:spring-beans:$springVersion"</span>
    <span class="n">compile</span> <span class="s2">"org.springframework:spring-expression:$springVersion"</span>
    <span class="n">compile</span> <span class="s2">"org.springframework:spring-aop:$springVersion"</span>
    <span class="n">compile</span> <span class="s2">"org.springframework:spring-aspects:$springVersion"</span>
    <span class="n">compile</span> <span class="s2">"org.springframework:spring-web:$springVersion"</span>
    <span class="n">compile</span> <span class="s2">"org.springframework:spring-webmvc:$springVersion"</span>

	<span class="n">testCompile</span> <span class="s2">"junit:junit:4.12"</span>
<span class="o">}</span>
</code></pre></div></div>

<p><code class="highlighter-rouge">web.xml</code>ï¼šé…ç½®<code class="highlighter-rouge">DispatcherServlet</code>åŠå…¶æ˜ å°„è·¯å¾„ï¼Œ<code class="highlighter-rouge">ContextLoaderListener</code>ï¼ˆåŠ è½½beançš„ä»»æ„å‘½åçš„xmlæ–‡ä»¶ï¼‰ï¼Œbeançš„xmlé…ç½®æ–‡ä»¶ã€‚</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="nt">&lt;web-app</span> <span class="na">xmlns=</span><span class="s">"http://xmlns.jcp.org/xml/ns/javaee"</span>
         <span class="na">xmlns:xsi=</span><span class="s">"http://www.w3.org/2001/XMLSchema-instance"</span>
         <span class="na">xsi:schemaLocation=</span><span class="s">"http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd"</span>
         <span class="na">version=</span><span class="s">"4.0"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;context-param&gt;</span>
        <span class="nt">&lt;param-name&gt;</span>contextConfigLocation<span class="nt">&lt;/param-name&gt;</span>
        <span class="nt">&lt;param-value&gt;</span>/WEB-INF/applicationContext.xml<span class="nt">&lt;/param-value&gt;</span>
    <span class="nt">&lt;/context-param&gt;</span>
    <span class="nt">&lt;listener&gt;</span>
        <span class="nt">&lt;listener-class&gt;</span>org.springframework.web.context.ContextLoaderListener<span class="nt">&lt;/listener-class&gt;</span>
    <span class="nt">&lt;/listener&gt;</span>
    <span class="nt">&lt;servlet&gt;</span>
        <span class="nt">&lt;servlet-name&gt;</span>dispatcher<span class="nt">&lt;/servlet-name&gt;</span>
        <span class="nt">&lt;servlet-class&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="nt">&lt;/servlet-class&gt;</span>
        <span class="nt">&lt;load-on-startup&gt;</span>1<span class="nt">&lt;/load-on-startup&gt;</span>
    <span class="nt">&lt;/servlet&gt;</span>
    <span class="nt">&lt;servlet-mapping&gt;</span>
        <span class="nt">&lt;servlet-name&gt;</span>dispatcher<span class="nt">&lt;/servlet-name&gt;</span>
<span class="c">&lt;!--        &lt;url-pattern&gt;*.form&lt;/url-pattern&gt;--&gt;</span>
        <span class="nt">&lt;url-pattern&gt;</span>/<span class="nt">&lt;/url-pattern&gt;</span>
    <span class="nt">&lt;/servlet-mapping&gt;</span>
<span class="nt">&lt;/web-app&gt;</span>
</code></pre></div></div>

<p><code class="highlighter-rouge">dispatcher-servlet.xml</code>ï¼šå‘½åä¸ºxxx-servlet.xmlæ ¼å¼çš„æ–‡ä»¶ä¼šè¢«spring mvcè‡ªåŠ¨åŠ è½½ï¼Œé…ç½®äº†è§†å›¾è§£æçš„è·¯å¾„ã€‚</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="nt">&lt;beans</span> <span class="na">xmlns=</span><span class="s">"http://www.springframework.org/schema/beans"</span>
       <span class="na">xmlns:xsi=</span><span class="s">"http://www.w3.org/2001/XMLSchema-instance"</span>
       <span class="na">xmlns:context=</span><span class="s">"http://www.springframework.org/schema/context"</span>
       <span class="na">xsi:schemaLocation=</span><span class="s">"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd"</span><span class="nt">&gt;</span>

    <span class="nt">&lt;context:component-scan</span> <span class="na">base-package=</span><span class="s">"com.yww"</span><span class="nt">/&gt;</span>

    <span class="nt">&lt;bean</span> <span class="na">class=</span><span class="s">"org.springframework.web.servlet.view.InternalResourceViewResolver"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"prefix"</span> <span class="na">value=</span><span class="s">"/WEB-INF/jsp/"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"suffix"</span> <span class="na">value=</span><span class="s">".jsp"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/bean&gt;</span>

<span class="nt">&lt;/beans&gt;</span>
</code></pre></div></div>

<p><code class="highlighter-rouge">applicationContext.xml</code>ï¼šé…ç½®äº†<code class="highlighter-rouge">ContextLoaderListener</code>åï¼Œå¯ä»¥åŠ è½½beançš„ä»»æ„å‘½åçš„xmlæ–‡ä»¶ï¼Œæ— éœ€xxx-servlet.xmlæ ¼å¼ã€‚</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="nt">&lt;beans</span> <span class="na">xmlns=</span><span class="s">"http://www.springframework.org/schema/beans"</span>
       <span class="na">xmlns:xsi=</span><span class="s">"http://www.w3.org/2001/XMLSchema-instance"</span>
       <span class="na">xsi:schemaLocation=</span><span class="s">"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd"</span><span class="nt">&gt;</span>

    <span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">"msg1"</span> <span class="na">class=</span><span class="s">"com.yww.Message"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"msg"</span> <span class="na">value=</span><span class="s">"mvc - xml config"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/bean&gt;</span>

<span class="nt">&lt;/beans&gt;</span>
</code></pre></div></div>

<p><code class="highlighter-rouge">HomeController.java</code></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">com.yww</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.springframework.stereotype.Controller</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.ui.Model</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.RequestMapping</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.RequestMethod</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.beans.factory.annotation.Autowired</span><span class="o">;</span>

<span class="nd">@Controller</span>
<span class="nd">@RequestMapping</span><span class="o">(</span><span class="s">"/home"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">HomeController</span> <span class="o">{</span>

    <span class="nd">@Autowired</span>
    <span class="kd">public</span> <span class="nc">Message</span> <span class="n">msg1</span><span class="o">;</span>

    <span class="nd">@RequestMapping</span><span class="o">(</span><span class="n">method</span> <span class="o">=</span> <span class="nc">RequestMethod</span><span class="o">.</span><span class="na">GET</span><span class="o">)</span>
    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">printHome</span><span class="o">(</span><span class="nc">Model</span> <span class="n">model</span><span class="o">){</span>
        <span class="nc">String</span> <span class="n">str1</span> <span class="o">=</span> <span class="n">msg1</span><span class="o">.</span><span class="na">getMsg</span><span class="o">();</span>
        <span class="n">model</span><span class="o">.</span><span class="na">addAttribute</span><span class="o">(</span><span class="s">"msg"</span><span class="o">,</span> <span class="s">"this is a page! gradle "</span> <span class="o">+</span> <span class="n">str1</span><span class="o">);</span>

        <span class="k">return</span> <span class="s">"home"</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p><code class="highlighter-rouge">Message.java</code></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">com.yww</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Message</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">msg</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">getMsg</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">msg</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setMsg</span><span class="o">(</span><span class="nc">String</span> <span class="n">msg</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">msg</span> <span class="o">=</span> <span class="s">"this mssage is : "</span> <span class="o">+</span> <span class="n">msg</span><span class="o">;</span>
    <span class="o">}</span>

<span class="o">}</span>
</code></pre></div></div>

<p><code class="highlighter-rouge">index.jsp</code></p>

<div class="language-jsp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;html&gt;</span>
<span class="nt">&lt;body&gt;</span>
<span class="nt">&lt;h2&gt;</span>Hello World!<span class="nt">&lt;/h2&gt;</span>
<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</code></pre></div></div>

<p><code class="highlighter-rouge">home.jsp</code></p>

<div class="language-jsp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html</span> <span class="na">lang=</span><span class="s">"en"</span><span class="nt">&gt;</span>
<span class="nt">&lt;head&gt;</span>
    <span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"UTF-8"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;title&gt;</span>Title<span class="nt">&lt;/title&gt;</span>
<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>
    <span class="nt">&lt;h1&gt;</span>${msg}<span class="nt">&lt;h1&gt;</span>
<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</code></pre></div></div>

<h4 id="å¯åŠ¨">å¯åŠ¨</h4>

<ul>
  <li>Project Structe -&gt; Artifacts -&gt; + -&gt; WebApplication:Exploded -&gt; From Modulesâ€¦ -&gt; OK</li>
  <li>Project Structe -&gt; Artifacts -&gt; + -&gt; WebApplication:Archive -&gt; For â€˜xxx:war explodedâ€™ -&gt; OK</li>
  <li>Edit Configurationsâ€¦ -&gt; + -&gt; Tomcat Server -&gt; local -&gt; Deployment -&gt; + Artifactâ€¦ -&gt; OK</li>
  <li>run(shift + F10)</li>
</ul>

<h3 id="javaé…ç½®dispatcherservlet">javaé…ç½®DispatcherServlet</h3>

<h4 id="é¡¹ç›®ç»“æ„-1">é¡¹ç›®ç»“æ„</h4>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>.
â”œâ”€â”€ build.gradle
â””â”€â”€ src
    â””â”€â”€ main
        â”œâ”€â”€ java
        â”‚Â Â  â””â”€â”€ com
        â”‚Â Â      â””â”€â”€ yww
        â”‚Â Â          â”œâ”€â”€ config
        â”‚Â Â          â”‚Â Â  â”œâ”€â”€ MyWebAppInitializer.java
        â”‚Â Â          â”‚Â Â  â”œâ”€â”€ RootConfig.java
        â”‚Â Â          â”‚Â Â  â””â”€â”€ WebConfig.java
        â”‚Â Â          â”œâ”€â”€ HomeController.java
        â”‚Â Â          â””â”€â”€ Message.java
        â”œâ”€â”€ resources
        â”‚Â Â  â””â”€â”€ application.properties
        â””â”€â”€ webapp
            â”œâ”€â”€ index.jsp
            â””â”€â”€ WEB-INF
                â”œâ”€â”€ jsp
                â”‚Â Â  â””â”€â”€ home.jsp
                â””â”€â”€ web.xml
</code></pre></div></div>

<h4 id="ä»£ç -1">ä»£ç </h4>

<p><code class="highlighter-rouge">build.gradle</code>ï¼šä¸åŒäºä¹‹å‰çš„ï¼Œjavaé…ç½®DispatcherServletï¼Œéœ€è¦æ·»åŠ <code class="highlighter-rouge">servlet-api</code>åº“ã€‚</p>

<div class="language-gradle highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">plugins</span> <span class="o">{</span>
	<span class="n">id</span> <span class="s1">'java'</span>
    <span class="n">id</span> <span class="s1">'war'</span>
<span class="o">}</span>

<span class="n">group</span> <span class="o">=</span> <span class="s1">'com.yww'</span>
<span class="n">version</span> <span class="o">=</span> <span class="s1">'0.0.1-SNAPSHOT'</span>
<span class="n">sourceCompatibility</span> <span class="o">=</span> <span class="mf">1.8</span>
<span class="n">targetCompatibility</span> <span class="o">=</span> <span class="mf">1.8</span>

<span class="n">ext</span><span class="o">{</span>
    <span class="n">springVersion</span> <span class="o">=</span> <span class="s1">'5.2.0.RELEASE'</span>
<span class="o">}</span>

<span class="k">repositories</span> <span class="o">{</span>
	<span class="n">mavenCentral</span><span class="o">()</span>
<span class="o">}</span>

<span class="k">dependencies</span> <span class="o">{</span>
    <span class="n">compile</span> <span class="s2">"org.springframework:spring-core:$springVersion"</span>
    <span class="n">compile</span> <span class="s2">"org.springframework:spring-context:$springVersion"</span>
    <span class="n">compile</span> <span class="s2">"org.springframework:spring-beans:$springVersion"</span>
    <span class="n">compile</span> <span class="s2">"org.springframework:spring-expression:$springVersion"</span>
    <span class="n">compile</span> <span class="s2">"org.springframework:spring-aop:$springVersion"</span>
    <span class="n">compile</span> <span class="s2">"org.springframework:spring-aspects:$springVersion"</span>
    <span class="n">compile</span> <span class="s2">"org.springframework:spring-web:$springVersion"</span>
    <span class="n">compile</span> <span class="s2">"org.springframework:spring-webmvc:$springVersion"</span>

	<span class="n">testCompile</span> <span class="s2">"junit:junit:4.12"</span>
    <span class="n">providedCompile</span> <span class="s1">'javax.servlet:javax.servlet-api:4.0.1'</span>
<span class="o">}</span>
</code></pre></div></div>

<p><code class="highlighter-rouge">web.xml</code>ï¼šä»€ä¹ˆä¹Ÿæ²¡æœ‰é…ç½®ï¼Œå…¨ä½¿ç”¨javaé…ç½®äº†ã€‚</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="nt">&lt;web-app</span> <span class="na">xmlns=</span><span class="s">"http://xmlns.jcp.org/xml/ns/javaee"</span>
         <span class="na">xmlns:xsi=</span><span class="s">"http://www.w3.org/2001/XMLSchema-instance"</span>
         <span class="na">xsi:schemaLocation=</span><span class="s">"http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd"</span>
         <span class="na">version=</span><span class="s">"4.0"</span><span class="nt">&gt;</span>

<span class="nt">&lt;/web-app&gt;</span>
</code></pre></div></div>

<p><code class="highlighter-rouge">MyWebAppInitializer.java</code></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">com.yww.config</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.springframework.web.servlet.support.AbstractAnnotationConfigDispatcherServletInitializer</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyWebAppInitializer</span> <span class="kd">extends</span> <span class="nc">AbstractAnnotationConfigDispatcherServletInitializer</span> <span class="o">{</span>
    <span class="nd">@Override</span>
    <span class="kd">protected</span> <span class="nc">Class</span><span class="o">&lt;?&gt;[]</span> <span class="n">getRootConfigClasses</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nc">Class</span><span class="o">[]{</span> <span class="nc">RootConfig</span><span class="o">.</span><span class="na">class</span> <span class="o">};</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">protected</span> <span class="nc">Class</span><span class="o">&lt;?&gt;[]</span> <span class="n">getServletConfigClasses</span><span class="o">()</span> <span class="o">{</span>    <span class="c1">// æŒ‡å®šé…ç½®ç±»</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nc">Class</span><span class="o">[]{</span> <span class="nc">WebConfig</span><span class="o">.</span><span class="na">class</span> <span class="o">};</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">protected</span> <span class="nc">String</span><span class="o">[]</span> <span class="nf">getServletMappings</span><span class="o">()</span> <span class="o">{</span>   <span class="c1">// å°†DispatcherServletæ˜ å°„åˆ°"/"</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nc">String</span><span class="o">[]{</span> <span class="s">"/"</span> <span class="o">};</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p><code class="highlighter-rouge">WebConfig.java</code></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">com.yww.config</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.springframework.context.annotation.Bean</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.context.annotation.ComponentScan</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.context.annotation.Configuration</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.servlet.ViewResolver</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.servlet.config.annotation.DefaultServletHandlerConfigurer</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.servlet.config.annotation.EnableWebMvc</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.servlet.config.annotation.WebMvcConfigurationSupport</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.servlet.view.InternalResourceViewResolver</span><span class="o">;</span>

<span class="nd">@Configuration</span>
<span class="nd">@EnableWebMvc</span>       <span class="c1">// å¯ç”¨Spring MVC</span>
<span class="c1">//@ComponentScan("com.yww")</span>
<span class="nd">@ComponentScan</span>      <span class="c1">// å¯ç”¨ç»„ä»¶æ‰«æï¼Œåªä¼šæ‰«æå½“å‰åŒ…ä¸‹çš„é…ç½®</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">WebConfig</span> <span class="kd">extends</span> <span class="nc">WebMvcConfigurationSupport</span> <span class="o">{</span>

    <span class="c1">// é…ç½®JSPè§†å›¾è§£æå™¨</span>
    <span class="nd">@Bean</span>
    <span class="kd">public</span> <span class="nc">ViewResolver</span> <span class="nf">viewResolver</span><span class="o">(){</span>
        <span class="nc">InternalResourceViewResolver</span> <span class="n">resolver</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">InternalResourceViewResolver</span><span class="o">();</span>
        <span class="n">resolver</span><span class="o">.</span><span class="na">setPrefix</span><span class="o">(</span><span class="s">"/WEB-INF/jsp/"</span><span class="o">);</span>
        <span class="n">resolver</span><span class="o">.</span><span class="na">setSuffix</span><span class="o">(</span><span class="s">".jsp"</span><span class="o">);</span>
        <span class="n">resolver</span><span class="o">.</span><span class="na">setExposeContextBeansAsAttributes</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
        <span class="k">return</span> <span class="n">resolver</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="c1">// é…ç½®é™æ€èµ„æºçš„å¤„ç†</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">configureDefaultServletHandling</span><span class="o">(</span><span class="nc">DefaultServletHandlerConfigurer</span> <span class="n">configurer</span><span class="o">){</span>
        <span class="n">configurer</span><span class="o">.</span><span class="na">enable</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p><code class="highlighter-rouge">RootConfig.java</code></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">com.yww.config</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.springframework.context.annotation.ComponentScan</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.context.annotation.ComponentScan.Filter</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.context.annotation.Configuration</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.context.annotation.FilterType</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.servlet.config.annotation.EnableWebMvc</span><span class="o">;</span>

<span class="nd">@Configuration</span>
<span class="nd">@ComponentScan</span><span class="o">(</span>
        <span class="n">basePackages</span> <span class="o">=</span> <span class="o">{</span><span class="s">"com.yww"</span><span class="o">},</span>
        <span class="n">excludeFilters</span> <span class="o">=</span> <span class="o">{</span><span class="nd">@Filter</span><span class="o">(</span><span class="n">type</span><span class="o">=</span> <span class="nc">FilterType</span><span class="o">.</span><span class="na">ANNOTATION</span><span class="o">,</span> <span class="n">value</span> <span class="o">=</span> <span class="nc">EnableWebMvc</span><span class="o">.</span><span class="na">class</span><span class="o">)}</span>
<span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">RootConfig</span> <span class="o">{</span>
<span class="o">}</span>
</code></pre></div></div>

<p><code class="highlighter-rouge">HomeController.java</code>ï¼ˆåŒä¸Šï¼‰</p>

<p><code class="highlighter-rouge">Message.java</code>ï¼ˆåŒä¸Šï¼‰</p>

<p><code class="highlighter-rouge">index.jsp</code>ï¼ˆåŒä¸Šï¼‰</p>

<p><code class="highlighter-rouge">home.jsp</code>ï¼ˆåŒä¸Šï¼‰</p>

<h2 id="æ¥å—è¯·æ±‚çš„è¾“å…¥">æ¥å—è¯·æ±‚çš„è¾“å…¥</h2>

<p>Spring MVCå…è®¸ä»¥å¤šç§æ–¹å¼å°†å®¢æˆ·ç«¯ä¸­çš„æ•°æ®ä¼ é€åˆ°æ§åˆ¶å™¨çš„å¤„ç†å™¨æ–¹æ³•ä¸­ï¼š</p>

<ul>
  <li>æŸ¥è¯¢å‚æ•°ï¼ˆQuery Parameterï¼‰</li>
  <li>è¡¨å•å‚æ•°ï¼ˆForm Parameterï¼‰</li>
  <li>è·¯å¾„å˜é‡ï¼ˆPath Variableï¼‰</li>
</ul>

<h3 id="é¡¹ç›®ç»“æ„-2">é¡¹ç›®ç»“æ„</h3>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>.
â”œâ”€â”€ build.gradle
â””â”€â”€ src
    â””â”€â”€ main
        â”œâ”€â”€ java
        â”‚Â Â  â””â”€â”€ com
        â”‚Â Â      â””â”€â”€ yww
        â”‚Â Â          â”œâ”€â”€ dao
        â”‚Â Â          â”‚Â Â  â””â”€â”€ User.java
        â”‚Â Â          â”œâ”€â”€ FormParamController.java
        â”‚Â Â          â”œâ”€â”€ PathParamController.java
        â”‚Â Â          â””â”€â”€ QueryParamController.java
        â”œâ”€â”€ resources
        â”‚Â Â  â””â”€â”€ application.properties
        â””â”€â”€ webapp
            â”œâ”€â”€ index.jsp
            â””â”€â”€ WEB-INF
                â”œâ”€â”€ applicationContext.xml
                â”œâ”€â”€ dispatcher-servlet.xml
                â”œâ”€â”€ jsp
                â”‚Â Â  â”œâ”€â”€ form.jsp
                â”‚Â Â  â””â”€â”€ home.jsp
                â””â”€â”€ web.xml
</code></pre></div></div>

<h3 id="ä»£ç -2">ä»£ç </h3>

<p><code class="highlighter-rouge">User.java</code></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">com.yww.dao</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">User</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">id</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">name</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">passwd</span><span class="o">;</span>

    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">getId</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">id</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setId</span><span class="o">(</span><span class="kt">int</span> <span class="n">id</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">id</span> <span class="o">=</span> <span class="n">id</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">getName</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">name</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setName</span><span class="o">(</span><span class="nc">String</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">getPasswd</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">passwd</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setPasswd</span><span class="o">(</span><span class="nc">String</span> <span class="n">passwd</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">passwd</span> <span class="o">=</span> <span class="n">passwd</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p><code class="highlighter-rouge">QueryParamController.java</code></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">com.yww</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.springframework.stereotype.Controller</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.ui.Model</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.RequestMapping</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.RequestMethod</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.RequestParam</span><span class="o">;</span>

<span class="nd">@Controller</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">QueryParamController</span> <span class="o">{</span>

    <span class="nd">@RequestMapping</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="s">"/query_param"</span><span class="o">,</span> <span class="n">method</span> <span class="o">=</span> <span class="nc">RequestMethod</span><span class="o">.</span><span class="na">GET</span><span class="o">)</span>
    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">printHome</span><span class="o">(</span>
            <span class="nc">Model</span> <span class="n">model</span><span class="o">,</span>
            <span class="nd">@RequestParam</span> <span class="kt">int</span> <span class="n">id</span><span class="o">,</span>
            <span class="nd">@RequestParam</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="s">"name"</span><span class="o">,</span> <span class="n">defaultValue</span> <span class="o">=</span> <span class="s">"yww"</span><span class="o">)</span> <span class="nc">String</span> <span class="n">username</span><span class="o">,</span>
            <span class="nd">@RequestParam</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="s">"count"</span><span class="o">,</span> <span class="n">defaultValue</span> <span class="o">=</span> <span class="s">"10"</span><span class="o">)</span> <span class="kt">long</span> <span class="n">count</span>  <span class="c1">// å°½ç®¡defaultValueå±æ€§ç»™å®šçš„æ—¶Stringç±»å‹çš„å€¼ï¼Œä½†å½“ç»‘å®šåˆ°æ–¹æ³•çš„countå‚æ•°æ—¶ï¼Œä¼šè‡ªåŠ¨è½¬æ¢ä¸ºlongç±»å‹ã€‚</span>
    <span class="o">){</span>
        <span class="nc">String</span> <span class="n">str1</span> <span class="o">=</span> <span class="s">" query - id:"</span> <span class="o">+</span> <span class="n">id</span> <span class="o">+</span> <span class="s">" username:"</span> <span class="o">+</span> <span class="n">username</span> <span class="o">+</span> <span class="s">" count:"</span> <span class="o">+</span> <span class="n">count</span><span class="o">;</span>
        <span class="n">model</span><span class="o">.</span><span class="na">addAttribute</span><span class="o">(</span><span class="s">"msg"</span><span class="o">,</span> <span class="s">"this is a page! "</span> <span class="o">+</span> <span class="n">str1</span><span class="o">);</span>

        <span class="k">return</span> <span class="s">"home"</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p><code class="highlighter-rouge">PathParamController.java</code></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">com.yww</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.springframework.stereotype.Controller</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.ui.Model</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.PathVariable</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.RequestMapping</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.RequestMethod</span><span class="o">;</span>

<span class="nd">@Controller</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">PathParamController</span> <span class="o">{</span>

    <span class="nd">@RequestMapping</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="s">"/path_param/{id}"</span><span class="o">,</span> <span class="n">method</span> <span class="o">=</span> <span class="nc">RequestMethod</span><span class="o">.</span><span class="na">GET</span><span class="o">)</span>
    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">printHome</span><span class="o">(</span>
            <span class="nc">Model</span> <span class="n">model</span><span class="o">,</span>
            <span class="nd">@PathVariable</span><span class="o">(</span><span class="s">"id"</span><span class="o">)</span> <span class="kt">int</span> <span class="n">id</span>
    <span class="o">){</span>
        <span class="nc">String</span> <span class="n">str1</span> <span class="o">=</span> <span class="s">" path - id:"</span> <span class="o">+</span> <span class="n">id</span><span class="o">;</span>
        <span class="n">model</span><span class="o">.</span><span class="na">addAttribute</span><span class="o">(</span><span class="s">"msg"</span><span class="o">,</span> <span class="s">"this is a page! "</span> <span class="o">+</span> <span class="n">str1</span><span class="o">);</span>

        <span class="k">return</span> <span class="s">"home"</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p><code class="highlighter-rouge">FormParamController.java</code></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">com.yww</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">com.yww.dao.User</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.stereotype.Controller</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.ui.Model</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.RequestMapping</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">org</span><span class="o">.</span><span class="na">springframework</span><span class="o">.</span><span class="na">web</span><span class="o">.</span><span class="na">bind</span><span class="o">.</span><span class="na">annotation</span><span class="o">.</span><span class="na">RequestMethod</span><span class="o">.*;</span>

<span class="nd">@Controller</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">FormParamController</span> <span class="o">{</span>

    <span class="nd">@RequestMapping</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="s">"/form_param"</span><span class="o">,</span> <span class="n">method</span> <span class="o">=</span> <span class="no">GET</span><span class="o">)</span>
    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">showForm</span><span class="o">(){</span>
        <span class="k">return</span> <span class="s">"form"</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@RequestMapping</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="s">"/form_param"</span><span class="o">,</span> <span class="n">method</span> <span class="o">=</span> <span class="no">POST</span><span class="o">)</span>
    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">postForm</span><span class="o">(</span>
            <span class="nc">Model</span> <span class="n">model</span><span class="o">,</span>
            <span class="nc">User</span> <span class="n">user</span>
    <span class="o">){</span>
        <span class="n">model</span><span class="o">.</span><span class="na">addAttribute</span><span class="o">(</span><span class="s">"msg"</span><span class="o">,</span> <span class="s">"this is a page! form : "</span> <span class="o">+</span> <span class="n">user</span><span class="o">.</span><span class="na">getName</span><span class="o">());</span>
        <span class="k">return</span> <span class="s">"home"</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p><code class="highlighter-rouge">form.jsp</code></p>

<div class="language-jsp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html</span> <span class="na">lang=</span><span class="s">"en"</span><span class="nt">&gt;</span>
<span class="nt">&lt;head&gt;</span>
    <span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"UTF-8"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;title&gt;</span>Title<span class="nt">&lt;/title&gt;</span>
<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>
<span class="nt">&lt;form</span> <span class="na">method=</span><span class="s">"post"</span><span class="nt">&gt;</span>
    id : <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">name=</span><span class="s">"id"</span> <span class="nt">/&gt;</span> <span class="nt">&lt;/br&gt;</span>
    name : <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">name=</span><span class="s">"name"</span> <span class="nt">/&gt;</span> <span class="nt">&lt;/br&gt;</span>
    password : <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">name=</span><span class="s">"passwd"</span> <span class="nt">/&gt;</span> <span class="nt">&lt;/br&gt;</span>

    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"submit"</span> <span class="na">value=</span><span class="s">"login"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/form&gt;</span>
<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</code></pre></div></div>

<h3 id="å¯åŠ¨-1">å¯åŠ¨</h3>

<p>æŸ¥è¯¢å‚æ•°ï¼ˆQuery Parameterï¼‰ï¼šhttp://localhost:8080/mvc_param/query_param?id=1001&amp;name=megumin&amp;count=7</p>

<p>è·¯å¾„å˜é‡ï¼ˆPath Variableï¼‰ï¼šhttp://localhost:8080/mvc_param/path_param/1001</p>

<p>è¡¨å•å‚æ•°ï¼ˆForm Parameterï¼‰ï¼šhttp://localhost:8080/mvc_param/form_param</p>

<h1 id="ps">PS</h1>

<h2 id="æ³¨xmlé…ç½®æ–‡ä»¶">æ³¨ï¼šxmlé…ç½®æ–‡ä»¶</h2>

<p>å‘½åä¸ºxxx-servlet.xmlæ ¼å¼çš„æ–‡ä»¶ä¼šè¢«spring mvcè‡ªåŠ¨åŠ è½½ï¼ˆå¦‚ï¼šdispatcher-servlet.xmlï¼‰ã€‚</p>

<p>é…ç½®äº†<code class="highlighter-rouge">ContextLoaderListener</code>åï¼Œå¯ä»¥åŠ è½½beançš„ä»»æ„å‘½åçš„xmlæ–‡ä»¶ï¼Œæ— éœ€xxx-servlet.xmlæ ¼å¼ï¼ˆå¦‚ï¼šapplicationContext.xmlï¼‰ã€‚</p>

<h2 id="é”™è¯¯class-file-for-javaxservletservletexception-not-found">é”™è¯¯ï¼šclass file for javax.servlet.ServletException not found</h2>

<p>javaé…ç½®<code class="highlighter-rouge">DispatcherServlet</code>ï¼Œéœ€è¦åœ¨<code class="highlighter-rouge">build.gradle</code>æ·»åŠ åº“ï¼š</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>`providedCompile 'javax.servlet:javax.servlet-api:4.0.1'`
</code></pre></div></div>

<h2 id="æ³¨è¡¨å•æäº¤è·¯å¾„">æ³¨ï¼šè¡¨å•æäº¤è·¯å¾„</h2>

<p><code class="highlighter-rouge">&lt;form&gt;</code>æ ‡ç­¾ä¸­æ²¡æœ‰è®¾ç½®actionå±æ€§çš„è¯ï¼Œå½“è¡¨å•æäº¤æ—¶ï¼Œå®ƒä¼šæäº¤åˆ°ä¸å±•ç°æ—¶ç›¸åŒçš„urlè·¯å¾„ä¸Šã€‚</p>
:ET